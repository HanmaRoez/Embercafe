:root{
  --ink:#0b132b; --ink-80:#1c2541;
  --lav:#eef0ff; --mint:#e8f3f1; --peach:#f8ede8; --white:#fff;
  --brand-primary: rgb(25, 59, 255);
  --ease:cubic-bezier(.2,.8,.2,1);
  --peek:0px; --gap:24px;
  --bg-grad: linear-gradient(180deg, var(--mint), var(--peach) 60%, var(--lav));
}

/* Base */
*{box-sizing:border-box}
html{scroll-behavior:smooth;text-size-adjust:100%}
html,body{
  margin:0; padding:0;
  font-family:"Overpass","Jost","TikTok Sans",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  font-optical-sizing:auto;
  font-size:clamp(16px,1.2vw,18px);
  color:var(--ink);
  background:var(--bg-grad);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
:where(button,input,select,textarea){font:inherit}
:where(.navlink,.tab,.ghost-arrow,.modal-close,.burger):focus-visible{outline:3px solid rgba(28,37,65,.45);outline-offset:2px;border-radius:8px}

/* Intro */
.intro{position:fixed;inset:0;background:#fff;z-index:1000;display:grid;place-items:center;transition:opacity .55s var(--ease);will-change:opacity}
.intro-inner{padding:24px;text-align:center}
.intro-word{font-weight:900;letter-spacing:-.02em;color:var(--brand-primary);font-size:clamp(38px,6.8vw,82px);opacity:0;transform:translate3d(0,14px,0) scale(.96);transition:opacity .7s var(--ease),transform .7s var(--ease)}
.intro-sub{display:block;margin-top:8px;font-weight:700;letter-spacing:.08em;color:#758;opacity:0;transform:translate3d(0,6px,0);transition:opacity .6s var(--ease) .25s,transform .6s var(--ease) .25s}
.intro-show .intro-word{opacity:1;transform:translate3d(0,0,0) scale(1)}
.intro-show .intro-sub{opacity:1;transform:none}
.intro-hide{opacity:0}
body.intro-active{overflow:hidden}
body.intro-active #page-root{opacity:0;transition:opacity .6s var(--ease),transform .6s var(--ease);transform:translate3d(0,8px,0)}
body:not(.intro-active) #page-root{opacity:1;transform:none}

/* Header */
.header{
  position:sticky; top:0; z-index:100;
  background:linear-gradient(180deg, rgba(255,255,255,.2), rgba(238,240,255,.92));
  backdrop-filter:saturate(140%) blur(10px);
  border-bottom:1px solid rgba(26,37,65,.08);
}
.container{max-width:1180px;margin:0 auto;padding:12px 20px}
.nav{display:flex;align-items:center;justify-content:space-between}

/* Logo */
.logo{display:inline-flex;align-items:center;gap:6px;text-decoration:none;-webkit-tap-highlight-color:transparent}
.logo-text{display:flex;flex-direction:column;line-height:1}
.logo-ember{font-weight:900;letter-spacing:.3px;color:var(--brand-primary);font-size:22px;text-transform:lowercase}
.logo-cafe{font-weight:700;letter-spacing:.2px;color:var(--brand-primary);font-size:16px;text-transform:lowercase}

/* Nav */
.links{display:flex;gap:18px;flex-wrap:wrap;align-items:center}
.navlink{position:relative;color:var(--ink);text-decoration:none;padding:6px 0}
.navlink.is-active{color:var(--ink-80)}
.navlink:after{content:"";position:absolute;left:0;bottom:0;height:2px;width:0;background:var(--ink-80);transition:width .25s var(--ease)}
.navlink:hover:after,.navlink.is-active:after{width:100%}

/* Burger */
.burger{display:none;position:relative;width:40px;height:36px;background:transparent;border:none;cursor:pointer;-webkit-tap-highlight-color:transparent}
.burger span{position:absolute;left:6px;right:6px;height:2px;background:var(--ink);transition:.25s var(--ease)}
.burger span:nth-child(1){top:10px}.burger span:nth-child(2){top:17px}.burger span:nth-child(3){top:24px}
.burger.open span:nth-child(1){transform:translateY(7px) rotate(45deg)}
.burger.open span:nth-child(2){opacity:0}
.burger.open span:nth-child(3){transform:translateY(-7px) rotate(-45deg)}

/* HERO — 5 столбиков */
.hero{padding:0}
.hero-shell{
  position:relative;
  width:100vw; left:50%; transform:translateX(-50%);
  height:64vh; min-height:460px; max-height:720px;
  overflow:hidden; background:linear-gradient(180deg,rgba(0,0,0,.06),rgba(0,0,0,.14));
}
.hero-stack{
  position:absolute; inset:0;
  display:flex; align-items:stretch; height:100%; width:100%;
  gap:12px; padding:12px; box-sizing:border-box;
  transition:box-shadow .6s var(--ease);
  box-shadow:0 18px 60px rgba(12,26,56,.28);
  cursor:pointer; touch-action:manipulation;
}
.hero-col{
  flex:1 1 0%; min-width:0;
  border-radius:10px; overflow:hidden; position:relative;
  /* медленнее раскрытие */
  transition:flex 1.1s var(--ease), filter .5s var(--ease), transform 1.1s var(--ease);
}
.hero-col img{width:100%;height:100%;object-fit:cover;display:block;transform:translateZ(0)}
@media (hover:hover) and (pointer:fine){
  .hero-stack:hover .hero-col{flex:0 1 0%; filter:brightness(.85)}
  .hero-stack:hover .hero-col:hover{flex:1 0 100%; filter:brightness(1)}
}
.hero-shell.expanded .hero-col{flex:0 0 0% !important; filter:brightness(.85)}
.hero-shell.expanded .hero-col.active{flex:1 0 100% !important; filter:brightness(1)}
.hero-caption{
  position:absolute; left: clamp(20px, 4vw, 38px); bottom: clamp(18px, 4vw, 42px);
  color:#fff; text-shadow:0 10px 30px rgba(0,0,0,.35);
  max-width:min(640px, 46vw);
  transition:opacity .45s var(--ease), transform .45s var(--ease);
}
.hero-caption h1{margin:0;font-weight:900;letter-spacing:.2px;font-size:clamp(30px,5.5vw,60px);line-height:1.05}
.hero-caption p{margin:10px 0 0;font-size:clamp(14px,2vw,18px);line-height:1.6}
.hero-caption .brand{color:var(--brand-primary)}
.hero-stack:hover ~ .hero-caption,
.hero-shell.expanded .hero-caption{opacity:0;transform:translate3d(0,10px,0)}

@media (max-width:820px){
  .hero-shell{min-height:420px}
  .hero-stack{gap:8px;padding:10px}
  .hero-caption{max-width:80vw}
}

/* Sections */
.section{padding:0 20px}
.section .container,.menu-section .container{max-width:1180px;margin:26px auto}

/* Tabs */
.menu-title{margin:0;font-size:clamp(23px,3.6vw,35px);font-weight:900;letter-spacing:.3px;text-transform:uppercase;color:var(--ink)}
.menu-header{display:grid;grid-template-columns:1fr auto;gap:16px;align-items:end}
.menu-tabs{display:flex;gap:12px;flex-wrap:wrap;overflow:visible;padding:6px 0}
@media (max-width:900px){
  .menu-tabs{flex-wrap:nowrap;overflow:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none}
  .menu-tabs::-webkit-scrollbar{display:none}
}
.tab{
  background:rgba(255,255,255,.92);border:1px solid rgba(12,26,56,.06);color:var(--ink);
  padding:11px 16px;font-weight:800;cursor:pointer;border-radius:999px;position:relative;
  transition:transform .12s var(--ease), box-shadow .16s var(--ease), background .16s var(--ease), border-color .16s var(--ease);
  box-shadow:0 1px 2px rgba(12,26,56,.04),0 10px 26px -12px rgba(12,26,56,.14);
  white-space:nowrap;
}
.tab:hover{transform:translateY(-1px);box-shadow:0 2px 6px rgba(12,26,56,.08),0 14px 32px -14px rgba(12,26,56,.18)}
.tab:active{transform:translateY(0)}
.tab::after{content:"";position:absolute;left:16px;right:16px;bottom:6px;height:2px;background:var(--ink-80);opacity:0;transform:scaleX(.6);transition:opacity .2s var(--ease),transform .2s var(--ease)}
.tab.active{background:linear-gradient(180deg,#ffffff 0%,#f3f5ff 100%);border-color:rgba(12,26,56,.10);color:var(--ink-80);box-shadow:0 6px 12px rgba(12,26,56,.08),0 18px 40px -18px rgba(12,26,56,.18)}
.tab.active::after{opacity:1;transform:scaleX(1)}
@media (max-width:820px){ .tab{ padding:8px 12px; font-size:clamp(13px,3.4vw,15px) }}

/* Slider */
.slider{position:relative;overflow:hidden;padding:0 var(--peek);touch-action:pan-y}
.slider::before,.slider::after{content:"";position:absolute;top:0;bottom:0;width:var(--peek);z-index:4;pointer-events:none}
.slider::before{left:0;background:linear-gradient(90deg,rgba(255,255,255,.85),rgba(255,255,255,0))}
.slider::after{right:0;background:linear-gradient(270deg,rgba(255,255,255,.85),rgba(255,255,255,0))}
.slides-wrapper{display:flex;gap:0;transform:translate3d(0,0,0);will-change:transform;contain:paint}
.slide{flex:0 0 100%;max-width:100%;margin:0 calc(var(--gap)/2);padding:6px 0;opacity:.42;transition:opacity .35s var(--ease)}
.slide.active{opacity:1}

/* Dish */
.dish{
  display:grid;grid-template-columns:0.9fr 1.1fr;gap:14px;align-items:stretch;
  background:linear-gradient(0deg, rgba(255,255,255,.62), rgba(255,255,255,.62)), var(--bg-grad);
  border:1px solid rgba(26,37,65,.12);
  box-shadow:0 6px 20px -10px rgba(12,26,56,.18);
  padding:12px;border-radius:16px;min-height:360px;

  /* фикс: убрал content-visibility:auto — он прятал следующие слайды при translate3d */
  contain:content;
}
.dish-media{position:relative;border:1px solid rgba(26,37,65,.12);overflow:hidden;min-height:200px;border-radius:12px}
.dish-media img{width:100%;height:100%;display:block;object-fit:cover;transform:translateZ(0)}
.dish-body{display:grid;grid-template-rows:auto 1fr auto;min-height:100%;padding:6px 6px 4px}
.dish-title{margin:2px 0 0;font-size:clamp(19px,2.3vw,24px);line-height:1.22;font-weight:900;text-wrap:balance}
.dish-desc{margin:8px 0 0;font-size:clamp(16px,1.8vw,18px);line-height:1.7;color:#2a314b;max-width:70ch;text-wrap:pretty;letter-spacing:.1px}
.dish-price{margin-top:10px;font-weight:900;color:var(--ink-80);font-size:clamp(17px,2vw,19px)}

/* Arrows & dots */
.ghost-arrow{--s:42px;position:absolute;top:50%;transform:translateY(-50%);width:var(--s);height:var(--s);border-radius:50%;background:radial-gradient(ellipse at 30% 30%, rgba(255,255,255,.98), rgba(250,252,255,.92));border:0;box-shadow:0 8px 18px rgba(12,26,56,.16),0 2px 6px rgba(12,26,56,.08);color:transparent;font-size:0;cursor:pointer;z-index:5;backdrop-filter:saturate(140%) blur(6px)}
.ghost-arrow::before{content:"";position:absolute;top:50%;left:50%;width:12px;height:12px;border-top:2px solid var(--ink);border-left:2px solid var(--ink);transform:translate(-40%,-50%) rotate(-45deg)}
.ghost-arrow.right::before{transform:translate(-60%,-50%) rotate(135deg)}
.ghost-arrow.left{left:calc(var(--peek) + 8px)} .ghost-arrow.right{right:calc(var(--peek) + 8px)}
.ghost-arrow:active{transform:translateY(-50%) scale(.98)}
.ghost-arrow[disabled]{opacity:.4;cursor:not-allowed;box-shadow:none}
.dots{display:flex;justify-content:center;gap:10px;padding:8px 0 12px}
.dot{width:9px;height:9px;border-radius:50%;background:rgba(12,26,56,.25)} .dot.is-active{background:rgba(12,26,56,.75)}

/* Modal / Bottom-sheet */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(2px);display:none;opacity:0;transition:opacity .2s var(--ease);z-index:110}
.modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%) scale(.98);width:min(880px,92vw);max-height:85vh;background:#fff;border:1px solid rgba(26,37,65,.12);display:grid;grid-template-columns:1.1fr .9fr;gap:0;opacity:0;pointer-events:none;z-index:120;box-shadow:0 24px 60px rgba(12,26,56,.18);will-change:transform,opacity}
.modal-media img{width:100%;height:100%;object-fit:cover}
.modal-body{padding:18px 20px}
.modal-price{font-weight:800;color:var(--ink-80);margin:6px 0 12px}
.modal-close{position:absolute;top:10px;right:12px;padding:6px 10px;background:#fff;border:1px solid rgba(26,37,65,.2);border-radius:8px;cursor:pointer}

/* Info */
.info{display:grid;grid-template-columns:1.1fr .9fr;gap:24px}
.note{padding:16px;background:var(--lav);border:1px solid rgba(26,37,65,.12);font-size:clamp(15px,1.6vw,17px);line-height:1.65}

/* Responsive */
@media (max-width:990px){
  .burger{display:block}
  .links{
    position:absolute;top:100%;right:20px;min-width:220px;
    background:rgba(255,255,255,.98);
    border:1px solid rgba(26,37,65,.12);
    border-radius:12px; padding:10px 12px; gap:10px; display:block;
    transform-origin:top right; transform:translateY(-8px) scale(.96);
    opacity:0; pointer-events:none; box-shadow:0 20px 60px rgba(12,26,56,.16);
    transition:opacity .25s var(--ease), transform .25s var(--ease);
  }
  .links.open{opacity:1;pointer-events:auto;transform:translateY(0) scale(1)}
  .info{grid-template-columns:1fr}
}
@media (max-width:820px){
  :root{--gap:14px}
  .menu-header{grid-template-columns:1fr;row-gap:10px}
  .ghost-arrow{display:none !important}
  .dish{grid-template-columns:1fr;gap:12px;padding:14px;border-radius:16px;min-height:420px}
  .dish-media{min-height:240px;border-radius:14px}
  .dish-body{background:rgba(255,255,255,.94);border:1px solid rgba(26,37,65,.08);border-radius:12px;padding:12px 12px 10px;gap:8px}
  .dish-title{font-size:clamp(20px,5.4vw,26px);line-height:1.22}
  .dish-desc{display:none}
  .modal{left:50%;top:auto;bottom:0;transform:translateX(-50%) translateY(8px);width:100%;max-height:calc(100vh - 10px);grid-template-columns:1fr;border-radius:16px 16px 0 0;overflow:hidden}
  .modal-media{max-height:48vh}
  .modal-body{padding:16px 16px calc(16px + env(safe-area-inset-bottom));overflow:auto}
  .modal-close{top:10px;right:12px;border-radius:10px;font-size:18px}
}
@media (max-width:640px){ :root{--peek:24px} }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{scroll-behavior:auto}
  .slide,.dish,.ghost-arrow,.navlink:after,.burger span,.intro,.intro-word,.intro-sub,#page-root{transition:none!important}
}
body.no-scroll{overflow:hidden}
